<!DOCTYPE html>
<html lang="esp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab - Práctica 6</title>
    <link rel="stylesheet" href="style.css"/>
    <link rel="shortcut icon" href="images/icon.ico"/>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+Da+2:wght@400;500;600;700;800&family=Josefin+Slab:ital,wght@0,400;0,600;1,300;1,400;1,600&family=Muli:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="spinner-container">
      <div class="circles">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="container">
      <div class="hamburger-menu">
        <div class="line line-1"></div>
        <div class="line line-2"></div>
        <div class="line line-3"></div>
        <span>Cerrar</span>
      </div>
      <header class="header">
        <div class="img-wrapper">
          <img src="images/prac6bg.jpg" />
        </div>
        <div class="banner">
          <h1>Wifi ESP8266 Entradas y Salidas Digitales</h1>
        </div>
        <a href="index.html">
          <div class="back-btn" id="backbtn">
            <i class="fas fa-arrow-left"></i>
          </div>
        </a>
      </header>
      <section class="sidebar">
        <ul class="menu">
          <li class="menu-item">
            <a href="#" class="menu-link" data-content="Home">Home</a>
          </li>
          <li class="menu-item">
            <a href="#intro" class="menu-link" data-content="Introducción">Introducción</a>
          </li>
          <li class="menu-item">
            <a href="#objt" class="menu-link" data-content="Objetivos">Objetivos</a>
          </li>
          <li class="menu-item">
            <a href="#marco" class="menu-link" data-content="Marco Teórico">Marco</a>
          </li>
          <li class="menu-item">
            <a href="#desa" class="menu-link" data-content="Desarrollo y Evidencias">Desarrollo</a>
          </li>
          <li class="menu-item">
            <a href="#conc" class="menu-link" data-content="Conclusión">Conclusión</a>
          </li>
          <li class="menu-item">
            <a href="#ref" class="menu-link" data-content="Referencias">Referencias</a>
          </li>
        </ul>
        <div class="social-media">
          <a href="https://www.facebook.com/diego.vegadeita.3/"><i class="fab fa-facebook-f"></i></a>
          <a href="https://www.instagram.com/dvdi888/?hl=es-la"><i class="fab fa-instagram"></i></a>
          <a href="https://twitter.com/DiegoVegaDeIta1"><i class="fab fa-twitter"></i></a>
        </div>
      </section>
      <section class="header">
        <div class="section-header">
          <h2 class="section-heading" id="intro">Introducción</h2>
          <div class="underline"></div>
          <div class="intro">
            <p>HTTP es un protocolo basado en el principio de cliente-servidor: las peticiones son enviadas por una entidad: el agente del usuario (o un proxy a petición de uno). La mayoría de las veces el agente del usuario (cliente) es un navegador Web, pero podría ser cualquier otro programa, como por ejemplo un programa-robot, que explore la Web, para adquirir datos de su estructura y contenido para uso de un buscador de Internet.</p>
            <p>HTTP define un conjunto de métodos de petición para indicar la acción que se desea realizar para un recurso determinado. Aunque estos también pueden ser sustantivos, estos métodos de solicitud a veces son llamados HTTP verbs.</p>
          </div>
        </div>
      </section>
      <section class="header-p6">
        <div class="section-header">
          <h2 class="section-heading" id="objt">Objetivos</h2>
          <div class="underline"></div>
          <h3 class="objetivos">Objetivo General</h3>
          <p>Conocer, identificar y comprobar el funcionamiento de las entradas y salidas digitales en el módulo Wifi ESP8266.</p>
          <h3>Objetivos específicos</h3>
          <ol>
            <li>Utilizando la información e instrucciones de la presentación, configurar el IDE de Arduino para poder programar el 
              NodeMCU directamente desde el entorno de Arduino, instalando las herramientas necesarias: 
              <a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json">http://arduino.esp8266.com/stable/package_
                esp8266com_index.json</a></li>
            <li>Desarrollar un programa de encendido de un LED mediante programación.</li>
            <li>Desarrollar un programa de apagado de un LED mediante programación.</li>
            <li>Desarrollar un programa de encendido y apagado de un LED mediante retardos.</li>
            <li>Desarrollar un sistema de encendido y apagado de un LED mediante el uso de botones.</li>
            <li>Desarrollar un sistema de encendido y apagado de un LED mediante el uso de dos botones y una condicional OR.</li>
            <li>Desarrollar un sistema de encendido y apagado de un LED mediante el uso de dos botones y una condicional AND.</li>
            <li>Utilizando el ejemplo de Thingspeak, desarrollar un sistema que mediante un botón conectado al NodeMCU enviemos un 1 al apretar el botón y un 0 al soltarlo.</li>
          </ol>
        </div>
      </section>
      <section class="header">
        <div class="section-header" >
          <h2 class="section-heading" id="marco">Marco Teórico</h2>
          <div class="underline"></div>
          <p>El ESP8266 es un chip Wi-Fi de bajo coste con pila TCP/IP completa y capacidad de MCU (Micro Controller Unit) 
            producida por el fabricante chino Espressif Systems, con sede en Shanghai. El chip primero llegó a la atención de los 
            fabricantes occidentales en agosto de 2014 con el módulo ESP-01. El ESP8266 tiene potentes capacidades a bordo de 
            procesamiento y almacenamiento que le permiten integrarse con sensores y dispositivos específicos de aplicación a través 
            de sus GPIOs con un desarrollo mínimo y carga mínima durante el tiempo de ejecución. Su alto grado de integración en el 
            chip permite una circuitería externa mínima, y la totalidad de la solución, incluyendo el módulo está diseñado para 
            ocupar el área mínima en un PCB.</p>
          <p><b>GET: </b>El método GET  solicita una representación de un recurso específico. Las peticiones que usan el método GET sólo deben recuperar datos.</p>
          <p><b>POST: </b>El método POST se utiliza para enviar una entidad a un recurso en específico, causando a menudo un cambio en el estado o efectos secundarios en el servidor.</p>
        </div>
      </section>
      <section class="header-desa">
        <div class="section-header">
          <h2 class="section-heading" id="desa">Desarollo y Evidencias</h2>
          <div class="underline"></div>
          <div class="meto">
            <p>La carga de firmware ya no fue necesaria en esta práctica, a continuación se muestran los códigos usados para cada objetivo, el último código se explicará más a profundidad que los otros al ser un poco más extenso. La carga de archivos necesitó de habilitar dicha carga desde terminal, habilitando a /dev/ttyUSB0 permisos de lectura y escrutira con el comando siguiente: sudo chmod a+rw /dev/ttyUSB0</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/5f5068cd-b501-4e6f-9444-bcebcf01c87d/preview?embed style="height:300px;width:60%;margin:20px; float:right;" frameborder=0></iframe>
            <p style="margin-top: 10%;">Este código es el primer código cargado al NodeMCU, su función es encender un led conectado en el pin D3 del dispositivo, no recibe entradas</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/03ffb138-e682-44b3-8688-2fdc9c5530e0/preview?embed style="height:300px;width:60%;margin:20px; float:left;" frameborder=0></iframe>
            <p style="margin-top: 15%;"> Este código, contrario al anterior, funciona para apagar el led en la salida del pin D3 des dispositivo, comparte con el código anterior el no tener entradas.</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/af7fa3b8-1b8c-4dd0-bb91-e7b86a87ab9b/preview?embed style="height:350px;width:60%;margin:20px; float:right;" frameborder=0></iframe>
            <p style="margin-top: 17%;">Este código combina los dos anteriores, usa la función delay para mantener encendido el led durante 1s y apagado 1s, el pin sigue siendo D3 y el código carece de entradas.</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/a7bfc6d1-7105-4f1c-a56e-e1c9266afd1b/preview?embed style="height:350px;width:60%;margin:20px; float:left;" frameborder=0></iframe>
            <p style="margin-top: 17%;">El código presente hace encender un led el mismo tiempo que se presiona un botón, si el botón está presionado el led está encendido, si el botón no está presionado el led está apagado, la salida sigue siendo el puerto D3 y la entrada, en este caso es S3</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/49919cea-ac8a-4d0c-914e-b4bc85b169b7/preview?embed style="height:350px;width:60%;margin:20px; float:right;" frameborder=0></iframe>
            <p style="margin-top: 17%;" >Para este código y en el armado del cirtuito se usaron dos botones, desde los pines S3 y S2, la salida sigue siendo D3, en este caso, el led se enciende solo si ambos botones se encuentran presionados, de lo contrario, permanece apagado</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/d0c3a6f3-0441-48bb-8a17-de0a7705bd9a/preview?embed style="height:350px;width:60%;margin:20px; float:left;" frameborder=0></iframe>
            <p style="margin-bottom: 15%; margin-top: 17%;">En este caso, el código y el armado es el mismo que el del ejemplo anterior, solo cambia la función del condicional, en la que pasa de un and a un or (&& a ||) por lo que, el led enciende si algún botón está presionado</p>
            <p>El diagrama seguido para el armado es el siguente, sin embargo, por falta de espacio se tuvo que realizar ciertos cambios, los pines quedaron igual que el esquema de clase pero se cablearon solo los pines necesarios para el funcionamiento del NodeMCU, al no poder colocar el circuito entero en la placa</p>
            <div class="image-gallery">
              <div class="img">
                <img src="images/prac6_1.png" alt="Esquema de armado del circuito" data-original="prac6_1.png">
              </div>
              <div class="img">
                <img src="images/prac6_2.jpeg" alt="Circuito armado" data-original="prac6_2.jpeg">
              </div>
              <div class="img">
                <img src="images/prac6_3.jpeg" alt="Circuito armado" data-original="prac6_3.jpeg">
              </div>
              <div class="img">
                <img src="images/prac6_4.jpeg" alt="Circuito armado y en funcionamiento" data-original="prac6_4.jpeg">
              </div>
            </div>
            <p>En el último código, se realizó el envío de un dato usando internet a la plataforma ThingSpeak, funciona con una latencia de 5 segundos para evitar sobrecargar el sistema de Thingspeak y el NodeMCU. Se envía el dato 0 si el botón no está presionado y el dato 100 si está presionado.</p>
            <iframe src=https://create.arduino.cc/editor/diegovegadeita/b9136010-7299-42ce-9c27-62809ce133a1/preview?embed style="height:1300px;width:60%;margin:20px;float:right;" frameborder=0></iframe>
            <p>Para este código hubo bastantes añadidos respecto a los anteriores, las librerías empleadas son las tres primeras lineas de código, todas están comentadas dentro del recuadro de la derecha. La librería ESP8266WiFi.h permite la conexion del NodeMCU a la red Wifi Local que se desee. La librería WiFiClient.h  permite configurar el NodeMCU en modo cliente. La librería ESP8266HTTPClient.h cotiene las funciones de envío de request tipo POST y GET cuando el NodeMCU está en modo cliente.</p>
            <p>En la función setup se establece el pin S3 como entrada, se habilita elserial y se usa la función conecta wifi.</p>
            <p>La función conectawifi imprime en el monitor serial el estado de la conexión wifi, imprime puntos mientras conecta la red y la información de la red una vez que se conecte de forma satisfactoria a la red deseada.</p>
            <p>La función enviar dato contstruye el dato para enviarlo desde un request a la aplicación de thingspeak con las credenciales mencionadas en el código previamente, si el wifi no está conectado al dispositivo entonces imprime un texto en el monitor serial</p>
            <p>En el loop se valida si el botón está presionado, si está presionado se usa la función enviar dato para enviar un "100"; si no lo está, se envía un 0</p>
            <div class="image-gallery">
              <div class="img">
                <img src="images/prac6_5.png" alt="Monitor serie" data-original="prac6_5.png">
              </div>
              <div class="img">
                <img src="images/prac6_6.png" alt="Recibimiento de varias instancias en tablero personal" data-original="prac6_6.png">
              </div>
            </div>
            <div class="modal">
              <img src="" alt="" class="fullsimg">
              <p class="caption"></p>
            </div>
          </div>
        </div>
      </section>
      <section class="header">
        <div class="section-header">
          <h2 class="section-heading" id="conc">Conclusión</h2>
          <div class="underline"></div>
          <p>Se realizaron los códigos básicos de arduino con relación a la operación del NodeMCU de forma interna, como un lector de los sensores (botónes)</p>
          <p>Además, el ejercicio final hace una conexión con la plataforma ThingSpeak en un tablero realizado para la lectura del dato enviado desde un botón mediante el método POST</p>
          <p>Se logró la conexión del NodeMCU a una red wifi por la que hizo viajar el dato a través de internet hacia la plataforma ThingSpeak</p>
        </div>
      </section>
      <section class="header">
        <div class="section-header">
          <h2 class="section-heading" id="ref">Referencias</h2>
          <div class="underline"></div>
          <ol>
            <li>MathWorks (2021). ThingSpeak Documentation. © 1994-2021 The MathWorks, Inc. </li>
            <li>ESPRESIF (2021). ESP8266. @2021 ESPRESSIF SYSTEMS (SHANGHAI) CO., LTD.</li>
          </ol>
        </div>
      </section>
      <a href="#">
        <div class="scroll-btn" id ="scrollbtn">
          <i class="fas fa-arrow-up"></i>
        </div>
      </a>
      <footer class="footer">
        <div class="footer-content">
          <p class="copyright">
            Copyright &copy; 2021, Diego Vega De Ita - All Rights Reserved
          </p>
          <div class="social-list">
            <a href="https://www.facebook.com/diego.vegadeita.3/"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/dvdi888/?hl=es-la"><i class="fab fa-instagram"></i></a>
            <a href="https://twitter.com/DiegoVegaDeIta1"><i class="fab fa-twitter"></i></a>
          </div>
        </div>
      </footer>

    <script src="script.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script src="tilt.js"></script>
  </body>
</html>